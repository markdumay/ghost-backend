# Use Docker DNS resolver for upstream servers
resolver 127.0.0.11 valid=30s;

# Define upstream host using map variable - prevents Nginx from failing when upstream server is unavailable
# Note: uses 'map' instead of 'set' - the latter is only allowed in {server, location, if} blocks
map $host $upstream_host {
    default ghost:2368;
}